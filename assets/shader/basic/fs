#version 330

layout(location = 0) out vec4 diffuse_out;

in vec3 normal;
in vec2 uv;

uniform vec4 dif;
uniform sampler2D tex;

uniform vec3 light_dir;

void main()
{
  diffuse_out = texture(tex, uv);
  diffuse_out.r *= dif.r;
  diffuse_out.g *= dif.g;
  diffuse_out.b *= dif.b;
  diffuse_out.a = 1.0;

  diffuse_out *= max(.7, dot(normalize(normal), normalize(light_dir)));
}
